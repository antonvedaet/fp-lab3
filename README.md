**Студент:** Ведерников Антон Владимирович  
**ИСУ:** 367970  
**Группа:** P3323  
**Университет:** НИУ ИТМО  
**Факультет:** Программная инженерия и компьютерная техника  
**Курс:** 3-й курс  

# Лабораторная работа: Интерполяция

## Цель работы

Цель данной лабораторной работы — изучение навыков работы с вводом/выводом, потоковой обработкой данных и командной строкой. Мы реализуем интерполяцию, включая линейную и Лагранжевую интерполяцию, в соответствии с заданными требованиями.

## Описание программы

Программа позволяет выполнять интерполяцию входных данных, подавая их на стандартный ввод в текстовом формате. Входные данные должны быть отсортированы по возрастанию по оси X. Программа работает в потоковом режиме, обеспечивая непрерывную обработку данных.

[Реализация](./src)

### Алгоритмы интерполяции

1. **Линейная интерполяция** — используется для расчета значений между двумя заданными точками, создавая отрезки.
2. **Лагранжева интерполяция** — используется для более точного вычисления значений на основе всех введенных точек.

### Аргументы командной строки

Пример использования программы

``` bash
cat input.txt | stack run -- <шаг> [linear &| lagrange]
```

### Архитектура программы

Программа организована следующим образом:

```
+---------------------------+
| обработка входного потока |
+---------------------------+
        |
        | поток / список / последовательность точек
        v
+-----------------------+      +------------------------------+
| алгоритм интерполяции |<-----| генератор точек, для которых |
+-----------------------+      | необходимо вычислить         |
        |                      | промежуточные значения       |
        |                      +------------------------------+
        |
        | поток / список / последовательность рассчитанных точек
        v
+------------------------+
| печать выходных данных |
+------------------------+

```

### Потоковый режим интерполяции

Программа реализует потоковую обработку данных с использованием окон, что позволяет динамически адаптироваться к изменениям во входных данных. Каждое окно данных, используемое для расчета интерполяции, содержит ограниченное количество точек, что обеспечивает точность расчетов. 

- При вводе новых точек старые данные постепенно удаляются из окна, а новые добавляются, как показано ниже:

```
o o o o o o . . x x x
  x x x . . o . . x x x
    x x x . . o . . x x x
      x x x . . o . . x x x
        x x x . . o . . x x x
          x x x . . o . . x x x
            x x x . . o o o o o o EOF
```


- **`o`** — рассчитанные значения интерполяции, для которых используется текущее окно данных. Большинство окон рассчитаны на одну точку, так как именно в центре результат наиболее точен.
- **`.`** — точки, задействованные в расчете значений `o`.
- **`x`** — точки, которые не используются для расчетов текущего окна.

Таким образом, программа эффективно работает в потоковом режиме, производя интерполяцию по мере поступления новых данных.

### Пример

# Команда
``` bash
cat input.csv | stack run -- 1.0 linear lagrange
```

# Вывод
```
Введите первую точку (x y):
Введите вторую точку (x y):
Линейная от 1.571 с шагом 1.0
  0.00  0.64  1.27
Введите новую точку (x y):
Линейная от 3.142 с шагом 1.0
  1.00  0.36  -0.27
Введите новую точку (x y):
Линейная от 4.712 с шагом 1.0
  0.00  -0.64  -1.27
Лагранж от 0.0 с шагом 1.0
  0.00  0.97  0.84  0.12  -0.67  -1.03  -0.42
Введите новую точку (x y):
Линейная от 6.283 с шагом 1.0
  -1.00  -0.36  0.27
Лагранж от 1.571 с шагом 1.0
  1.00  0.47  -0.36  -0.96  -0.83  0.56  3.72
Введите новую точку (x y):
Линейная от 7.854 с шагом 1.0
  0.00  0.64  1.27
Лагранж от 3.142 с шагом 1.0
  0.00  -0.97  -0.84  -0.12  0.67  1.03  0.42
Введите новую точку (x y):
Линейная от 9.425 с шагом 1.0
  1.00  0.36  -0.27
Лагранж от 4.712 с шагом 1.0
  -1.00  -0.47  0.36  0.96  0.83  -0.56  -3.71
Введите новую точку (x y):
Линейная от 10.996 с шагом 1.0
  0.00  -0.64  -1.27
Лагранж от 6.283 с шагом 1.0
  0.00  0.97  0.84  0.12  -0.67  -1.03  -0.42
Введите новую точку (x y):
Линейная от 12.568 с шагом 1.0
  -1.00  -0.36  0.27
Лагранж от 7.854 с шагом 1.0
  1.00  0.47  -0.36  -0.96  -0.83  0.55  3.70
Введите новую точку (x y):
Линейная от 14.139 с шагом 1.0
  0.00  0.64  1.27
Лагранж от 9.425 с шагом 1.0
  0.00  -0.97  -0.84  -0.12  0.67  1.03  0.42
```
# Данные
```
0.0,0.0
1.571,1.00
3.142,0.00
4.712,-1.00
6.283,0.00
7.854,1.00
9.425,0.00
10.996,-1.00
12.568,0.00
14.139,1.00
```

## Тестирование

### Unit Testing

Для тестирования были реализованы следующие [тесты](./test)

### Вывод

В ходе выполнения лабораторной работы была успешно реализована программа для интерполяции, которая отвечает всем заданным требованиям. Основные достижения включают:

1. **Потоковая обработка данных**: Программа принимает входные данные через стандартный ввод, что позволяет обрабатывать данные в реальном времени и обеспечивать непрерывный поток вычислений.

2. **Алгоритмы интерполяции**: Реализованы как линейная интерполяция, так и Лагранжева интерполяция. Оба алгоритма работают корректно и могут быть вызваны одновременно в зависимости от переданных аргументов командной строки.

3. **Динамическое окно данных**: Программа поддерживает динамическое обновление окна данных, что позволяет точно рассчитывать промежуточные значения на основе самых свежих входных данных. Алгоритмы адаптируются к количеству введенных точек, что делает их гибкими и удобными для использования.

4. **Вывод результатов**: Рассчитанные значения выводятся в удобочитаемом формате, что упрощает анализ результатов интерполяции.

В целом, данная реализация демонстрирует хорошие навыки работы с потоковой обработкой данных, использованием алгоритмов интерполяции и взаимодействием с командной строкой. Программа может быть использована в дальнейших приложениях, связанных с вычислительной математикой и анализом данных.



